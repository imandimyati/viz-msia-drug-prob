<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <title>Visualising Malaysia&#39;s Drug Abuse Issues</title>
  <link rel="stylesheet" href="stylesheets/styles.css">
  <link rel="stylesheet" href="stylesheets/github-light.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/dimple/2.2.0/dimple.latest.min.js"></script>
  <meta name="viewport" content="width=device-width">
  <!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>
<body>
  <div class="wrapper">
    <header>
      <h1>An In-Depth Look at Malaysia's Drug Addicts</h1>
      <p>Exploring the demographic data of drug addicts in Malaysia</p>
      <p class="view"><a href="https://imandimyati.github.io/viz-msia-drug-prob/main.html">The Costs of Tackling Drug Abuse<small><br>Looking at the costs of tackling drug abuse in Malaysia</small></a></p>
      <p class="view"><a href="https://imandimyati.github.io/viz-msia-drug-prob/art2.html">An In-Depth Look at Malaysia's Drug Addicts<small><br>Exploring the demographic data of drug addicts in Malaysia</small></a></p>
      <p class="view"><a href="https://imandimyati.github.io/viz-msia-drug-prob/art3.html">Drug Crimes: Offenses and Punishments<small><br>Looking at drug-related offenses and punishments in Malaysia</small></a></p>
      <p class="view"><a href="https://imandimyati.github.io/viz-msia-drug-prob/art4.html">'Drugging' Down the Nation<small><br>Making sense of the social impact in relation to drug abuse in Malaysia</small></a></p>
      <a href="https://imandimyati.github.io/viz-msia-drug-prob/"><button>Home</button></a>
    </header>

    <section>
      <h4>Understanding who the drug addicts are and what the reasons that made them turn to drug is important in addressing the issue of drug abuse. By looking at and exploring the demographic breakdown, we can draw a clearer picture how we can tackle the issue. </h4>
      <p>On 19th February 1983, drug abuse was declared to be the main threat to national security. The declaration was made because drug addiction could reach epidemic proportions if a tough stand was not taken to address the menace. Even at the time, 65% of the addicts were young men between the ages of 20 to 29.</p>
      <p>Abdul Rani Kamarudin, who researches drug abuse in Malaysia, wrote that these men represented the backbone and the hope of the nation’s future. The adverse effect on the uncontrolled drug addiction and trafficking could threaten the socio-economic wellbeing, spiritual and natural culture of the nation’s population, hence undermining national resilience and national security.</p>

      <div id="genderChart">
        <h4>Drug Addicts by Gender: Huge gap between men and women</h4>

        <p>Recent data from the National Anti-Drug Agency (NADA) clearly shows despite the declaration back in 1983, the number is still huge. The gap between men and women are still worlds apart. Over the years, it can be seen that the number of female drug addicts are on the rise. However, the number is still in the hundreds.</p>
        <p>The same cannot be said about men. From 2010 until 2014, the numbers has always been a five-digit number. While the numbers seemed to decrease from 2010, it has once again climbed up in 2012. The chart below demonstrates the number of drug addicts by gender over the year (2010 to 2014).</p>

        <script type="text/javascript">
        var svg = dimple.newSvg("#genderChart", 450, 230);
          d3.csv("datasets_csv/drug_addicts_gender.csv", function (data) {
            console.log(data)

            svg.append("text")
              .attr("x", 180)
              .attr("y", 8)
              .attr("text-anchor", "middle")
              .style("font-size", "10px")
              .style("font-weight", "bold")
              .text("Drug Addicts Breakdown by Gender");

            var genChart = new dimple.chart(svg, data);
            genChart.setBounds(60, 20, 252, 152);

            var x = genChart.addCategoryAxis("x", "Year");
            x.addOrderRule("Date");

            var y = genChart.addMeasureAxis("y", "Total");
            y.tickFormat = 'f';

            mySeries = genChart.addSeries("Gender", dimple.plot.line);
              mySeries.lineMarkers = true;
            var myLegend = genChart.addLegend(380, 15, 5, 180, "right");

            genChart.draw();

            genChart.legends = [];

            svg.selectAll("title_text")
              .data(["Click legend to","show/hide gender:"])
              .enter()
              .append("text")
                .attr("x", 315)
                .attr("y", function (d, i) { return 10 + i * 12; })
                .style("font-family", "sans-serif")
                .style("font-size", "10px")
                .style("color", "Black")
                .text(function (d) { return d; });

            var filterValues = dimple.getUniqueValues(data, "Gender");

            myLegend.shapes.selectAll("rect")
              // Add a click event to each rectangle
              .on("click", function (e) {
                // This indicates whether the item is already visible or not
                var hide = false;
                var newFilters = [];
                // If the filters contain the clicked shape hide it
                filterValues.forEach(function (f) {
                  if (f === e.aggField.slice(-1)[0]) {
                    hide = true;
                  } else {
                    newFilters.push(f);
                  }
                });
                // Hide the shape or show it
                if (hide) {
                  d3.select(this).style("opacity", 0.2);
                } else {
                  newFilters.push(e.aggField.slice(-1)[0]);
                  d3.select(this).style("opacity", 0.9);
                }
                // Update the filters
                filterValues = newFilters;
                // Filter the data
                genChart.data = dimple.filterData(data, "Gender", filterValues);

                genChart.draw(800);
              });
              svg.selectAll("notes_text")
                .data(["Data source: National Anti-Drug Agency"])
                .enter()
                .append("text")
                  .attr("x", 25)
                  .attr("y", function(d, i) { return 220 + i *15; } )
                  .style("font-family", "sans-serif")
                  .style("font-size", "10px")
                  .text(function (d) { return d; });
            });
        </script>
      </div>

      <div id="ageChart">
        <h4>Drug Addicts by Age: Young adults number on the rise</h4>

        <p>When it comes to age, the highest number is people age 40 and over. Since 2012, the number for this group have increased from around 3,000 to 5,000. In fact, it seems that aside from under 13 of age, all age group has seen an increase in number from 2012 onwards.</p>
        <p>What is concerning is that the number of young adults (age 20 until 29) that are involved with drugs is clearly increasing. The age group of 20 to 24 has seen an increase from around 2,800 people in 2012, but in 2014, it is shy of around 4,000. The same goes for those in the age group of 25 to 29.</p>
        <p>While the numbers are still considered small, we can’t disregard the fact that there are people as young 13 to 15 years old who are drug addicts. Explore the chart below to get a clearer picture on the numbers.</p>

        <script type="text/javascript">
        var svgOne = dimple.newSvg("#ageChart", 450, 230);
          d3.csv("datasets_csv/drug_addicts_age.csv", function (dataOne) {
            console.log(dataOne)

            svgOne.append("text")
              .attr("x", 180)
              .attr("y", 8)
              .attr("text-anchor", "middle")
              .style("font-size", "10px")
              .style("font-weight", "bold")
              .text("Drug Addicts Breakdown by Age");

            var ageChart = new dimple.chart(svgOne, dataOne);
            ageChart.setBounds(60, 20, 252, 152);

            var xOne = ageChart.addCategoryAxis("x", "Year");
            xOne.addOrderRule("Date");

            var yOne = ageChart.addMeasureAxis("y", "Total");
            yOne.tickFormat = 'f';

            var mySeriesOne = ageChart.addSeries("Age", dimple.plot.line);
              mySeriesOne.lineMarkers = true;
            var myLegendOne = ageChart.addLegend(415, 15, 5, 180, "right");

            myLegendOne._getEntries = function () {
              var orderedValuesOne = ["Under 13", "13-15", "16-19", "20-24", "25-29", "30-34", "35-39", "40 and Over", "No Information"];
              var entriesOne = [];
              orderedValuesOne.forEach(function (v) {
                entriesOne.push(
                  {
                    key: v,
                    fill: ageChart.getColor(v).fill,
                    stroke: ageChart.getColor(v).stroke,
                    opacity: ageChart.getColor(v).opacity,
                    aggField: [v]
                  }
                );
              }, this);

              return entriesOne;
            };

            ageChart.draw();

            ageChart.legends = [];

            svgOne.selectAll("title_text")
              .data(["Click legend to","show/hide age:"])
              .enter()
              .append("text")
                .attr("x", 318)
                .attr("y", function (d, i) { return 10 + i * 12; })
                .style("font-family", "sans-serif")
                .style("font-size", "10px")
                .style("color", "Black")
                .text(function (d) { return d; });

            var filterValuesOne = dimple.getUniqueValues(dataOne, "Age");

            myLegendOne.shapes.selectAll("rect")
              // Add a click event to each rectangle
              .on("click", function (e) {
                // This indicates whether the item is already visible or not
                var hide = false;
                var newFiltersOne = [];
                // If the filters contain the clicked shape hide it
                filterValuesOne.forEach(function (f) {
                  if (f === e.aggField.slice(-1)[0]) {
                    hide = true;
                  } else {
                    newFiltersOne.push(f);
                  }
                });
                // Hide the shape or show it
                if (hide) {
                  d3.select(this).style("opacity", 0.2);
                } else {
                  newFiltersOne.push(e.aggField.slice(-1)[0]);
                  d3.select(this).style("opacity", 0.9);
                }
                // Update the filters
                filterValuesOne = newFiltersOne;
                // Filter the data
                ageChart.data = dimple.filterData(dataOne, "Age", filterValuesOne);

                ageChart.draw(800);
              });
              svgOne.selectAll("notes_text")
                .data(["Data source: National Anti-Drug Agency"])
                .enter()
                .append("text")
                  .attr("x", 25)
                  .attr("y", function(d, i) { return 220 + i *15; } )
                  .style("font-family", "sans-serif")
                  .style("font-size", "10px")
                  .text(function (d) { return d; });
            });
        </script>
      </div>

      <div id="ethnicChart">
        <h4>Drug Addicts by Ethnicity: Most drug addicts are Malays</h4>

        <p>Malaysia is known as a melting pot of culture. The country promotes ethnic and culture diversity. According to the Department of Statistics, in 2016, the total population of Malaysia is estimated at 31.7 million persons, an increase of 0.5 million persons as compared to 31.2 million persons in 2015 with 1.5 per cent population growth rate for the same period. Excluding non-Malaysian citizens, there are 28.4 million Malaysians.</p>
        <p>Among Malaysian citizens, the ethnic composition consist of: ethnic Bumiputera (Malay, Bumiputera Sabah and Bumiputera Sarawak) recorded the highest percentage with 68.6 per cent, followed by Chinese (23.4%), Indians (7.0%) and others (1.0 %). Therefore, excluding Sabah and Sarawak, the Malays recorded the highest number as drug addicts. This is followed by Chinese and Indian. </p>
        <p>While the gap between Chinese and Indian are often just around a few hundreds, the gap between Malays and the rest of the ethnic group is massive. Over the years, there has been a consistent five-digit difference as shown by the chart below. </p>

        <script type="text/javascript">
        var svgTwo = dimple.newSvg("#ethnicChart", 450, 230);
          d3.csv("datasets_csv/drug_addicts_ethnic.csv", function (dataTwo) {
            console.log(dataTwo)

            svgTwo.append("text")
              .attr("x", 180)
              .attr("y", 8)
              .attr("text-anchor", "middle")
              .style("font-size", "10px")
              .style("font-weight", "bold")
              .text("Drug Addicts Breakdown by Ethnicity");

            var ethChart = new dimple.chart(svgTwo, dataTwo);
            ethChart.setBounds(60, 20, 252, 152);

            var xTwo = ethChart.addCategoryAxis("x", "Year");
            xTwo.addOrderRule("Date");

            var yTwo = ethChart.addMeasureAxis("y", "Total");
            yTwo.tickFormat = 'f';

            var mySeriesTwo = ethChart.addSeries("Ethnicity", dimple.plot.line);
                mySeriesTwo.lineMarkers = true;
            var myLegendTwo = ethChart.addLegend(440, 18, 5, 180, "right");

            myLegendTwo._getEntries = function () {
              var orderedValuesTwo = ["Malay", "Chinese", "Indian", "Bumiputera Sabah", "Bumiputera Sarawak", "Others"];
              var entriesTwo = [];
              orderedValuesTwo.forEach(function (v) {
                entriesTwo.push(
                  {
                    key: v,
                    fill: ethChart.getColor(v).fill,
                    stroke: ethChart.getColor(v).stroke,
                    opacity: ethChart.getColor(v).opacity,
                    aggField: [v]
                  }
                );
              }, this);

              return entriesTwo;
            };

            ethChart.draw();

            ethChart.legends = [];

            svgTwo.selectAll("title_text")
              .data(["Click legend to","show/hide ethnicity:"])
              .enter()
              .append("text")
                .attr("x", 315)
                .attr("y", function (d, i) { return 10 + i * 12; })
                .style("font-family", "sans-serif")
                .style("font-size", "10px")
                .style("color", "Black")
                .text(function (d) { return d; });

            var filterValuesTwo = dimple.getUniqueValues(dataTwo, "Ethnicity");

            myLegendTwo.shapes.selectAll("rect")
              // Add a click event to each rectangle
              .on("click", function (e) {
                // This indicates whether the item is already visible or not
                var hide = false;
                var newFiltersTwo = [];
                // If the filters contain the clicked shape hide it
                filterValuesTwo.forEach(function (f) {
                  if (f === e.aggField.slice(-1)[0]) {
                    hide = true;
                  } else {
                    newFiltersTwo.push(f);
                  }
                });
                // Hide the shape or show it
                if (hide) {
                  d3.select(this).style("opacity", 0.2);
                } else {
                  newFiltersTwo.push(e.aggField.slice(-1)[0]);
                  d3.select(this).style("opacity", 0.9);
                }
                // Update the filters
                filterValuesTwo = newFiltersTwo;
                // Filter the data
                ethChart.data = dimple.filterData(dataTwo, "Ethnicity", filterValuesTwo);

                ethChart.draw(800);
              });
              svgTwo.selectAll("notes_text")
                .data(["Data source: National Anti-Drug Agency"])
                .enter()
                .append("text")
                  .attr("x", 25)
                  .attr("y", function(d, i) { return 220 + i *15; } )
                  .style("font-family", "sans-serif")
                  .style("font-size", "10px")
                  .text(function (d) { return d; });
            });
        </script>
      </div>

      <div id="educationChart">
        <h4>Drug Addicts by Education Qualification: Most drug addicts had no tertiary education</h4>

        <p>Looking at education qualification, it is clear that most drug addicts don’t make it to university. Most of them ended their education around the age of 15 or 17. In Malaysia, LCE/SRP/PMR is the exam you take when you are 15 years old, while MCE/SPM/SPMV is the last national exam a Malaysian take in secondary school before continuing to the tertiary level. </p>
        <p>From the chart below, it shows how education play an important role in determining whether a person is susceptible to drug abuse. Those with a bachelor’s, master’s or even a doctorate degree are rarely recorded as drug addicts. Over the years, this group has only recorded two-digit numbers. </p>
        <p>Another thing to note is that, education qualification can also be construed as a wage indicator. There are no data collected on the breakdown of drug addicts based on wages, but we can hypothesize that those with a degree fare much better in that department compared to those who didn’t make it to the tertiary level. Explore the chart below to understand better. </p>

        <script type="text/javascript">
        var svgThree = dimple.newSvg("#educationChart", 450, 230);
          d3.csv("datasets_csv/drug_addicts_education.csv", function (dataThree) {
            console.log(dataThree)

            svgThree.append("text")
              .attr("x", 180)
              .attr("y", 8)
              .attr("text-anchor", "middle")
              .style("font-size", "10px")
              .style("font-weight", "bold")
              .text("Drug Addicts Breakdown by Education Qualification");

            var eduChart = new dimple.chart(svgThree, dataThree);
            eduChart.setBounds(60, 20, 252, 152);

            var xThree = eduChart.addCategoryAxis("x", "Year");
            xThree.addOrderRule("Date");

            var yThree = eduChart.addMeasureAxis("y", "Total");
            yThree.tickFormat = 'f';

            var mySeriesThree = eduChart.addSeries("Education Qualifications", dimple.plot.line);
              mySeriesThree.lineMarkers = true;
            var myLegendThree = eduChart.addLegend(435, 18, 5, 180, "right");

            myLegendThree._getEntries = function () {
              var orderedValuesThree = ["No Education", "Primary School", "LCE/SRP/PMR", "MCE/SPM/SPMV", "HSC/STP/STPM", "Diploma", "Degree/Master/PHD", "Other Qualifications"];
              var entriesThree = [];
              orderedValuesThree.forEach(function (v) {
                entriesThree.push(
                  {
                    key: v,
                    fill: eduChart.getColor(v).fill,
                    stroke: eduChart.getColor(v).stroke,
                    opacity: eduChart.getColor(v).opacity,
                    aggField: [v]
                  }
                );
              }, this);

              return entriesThree;
            };

            eduChart.draw();

            eduChart.legends = [];

            svgThree.selectAll("title_text")
              .data(["Click legend to show/hide","education qualification:"])
              .enter()
              .append("text")
                .attr("x", 314)
                .attr("y", function (d, i) { return 10 + i * 12; })
                .style("font-family", "sans-serif")
                .style("font-size", "10px")
                .style("color", "Black")
                .text(function (d) { return d; });

            var filterValuesThree = dimple.getUniqueValues(dataThree, "Education Qualifications");

            myLegendThree.shapes.selectAll("rect")
              // Add a click event to each rectangle
              .on("click", function (e) {
                // This indicates whether the item is already visible or not
                var hide = false;
                var newFiltersThree = [];
                // If the filters contain the clicked shape hide it
                filterValuesThree.forEach(function (f) {
                  if (f === e.aggField.slice(-1)[0]) {
                    hide = true;
                  } else {
                    newFiltersThree.push(f);
                  }
                });
                // Hide the shape or show it
                if (hide) {
                  d3.select(this).style("opacity", 0.2);
                } else {
                  newFiltersThree.push(e.aggField.slice(-1)[0]);
                  d3.select(this).style("opacity", 0.9);
                }
                // Update the filters
                filterValuesThree = newFiltersThree;
                // Filter the data
                eduChart.data = dimple.filterData(dataThree, "Education Qualifications", filterValuesThree);

                eduChart.draw(800);
              });
              svgThree.selectAll("notes_text")
                .data(["Data source: National Anti-Drug Agency"])
                .enter()
                .append("text")
                  .attr("x", 25)
                  .attr("y", function(d, i) { return 220 + i *15; } )
                  .style("font-family", "sans-serif")
                  .style("font-size", "10px")
                  .text(function (d) { return d; });
            });
        </script>
      </div>

      <div id="occupationChart">
        <h4>Drug Addicts by Occupation: Labourers prone to drug abuse</h4>

        <p>Like the breakdown for education qualification, occupation can also tell a lot about wages. In this case, we see that the highest number of drug addicts work as labourers. A labourer is a person (most are men) who works in one of the construction trades. Traditionally it is considered as an unskilled manual labour, as opposed to skilled labour. </p>
        <p>These group is among the lower income group. Take a general construction worker as an example, in capital city Kuala Lumpur, a local worker is paid a minimum of RM50 a day and a maximum of RM80 a day. </p>
        <p>However, based on the Construction Industry Development Board (CIDB) 2014 data, the common wage for them a day is RM63. Roughly speaking, they make around RM1,600 (approx. £300) per month. Add to that, it is hard labour. </p>
        <p>Another group that has seen a spike of increase over the years is those working part-time jobs. In 2013, the number exploded from around 1,000 in 2012 to 4,000. Notably, the two field that have recorded two-digit numbers are clerical and entertainment. See the chart below on the breakdown of drug addicts based on their occupation. </p>

        <script type="text/javascript">
        var svgFour = dimple.newSvg("#occupationChart", 450, 340);
          d3.csv("datasets_csv/drug_addicts_occupation.csv", function (dataFour) {
            console.log(dataFour)

            svgFour.append("text")
              .attr("x", 180)
              .attr("y", 8)
              .attr("text-anchor", "middle")
              .style("font-size", "10px")
              .style("font-weight", "bold")
              .text("Drug Addicts Breakdown by Occupation");

            var occChart = new dimple.chart(svgFour, dataFour);
            occChart.setBounds(60, 20, 252, 152);

            var xFour = occChart.addCategoryAxis("x", "Year");
            xFour.addOrderRule("Date");

            var yFour = occChart.addMeasureAxis("y", "Total");
            yFour.tickFormat = 'f';

            var mySeriesFour = occChart.addSeries("Occupation", dimple.plot.line);
              mySeriesFour.lineMarkers = true;
            var myLegendFour = occChart.addLegend(35, 230, 300, 80, "right");

            occChart.draw();

            occChart.legends = [];

            svgFour.selectAll("title_text")
              .data(["Click legend to show/hide occupation:"])
              .enter()
              .append("text")
                .attr("x", 36)
                .attr("y", function (d, i) { return 220 + i * 12; })
                .style("font-family", "sans-serif")
                .style("font-size", "10px")
                .style("color", "Black")
                .text(function (d) { return d; });

            var filterValuesFour = dimple.getUniqueValues(dataFour, "Occupation");

            myLegendFour.shapes.selectAll("rect")
              // Add a click event to each rectangle
              .on("click", function (e) {
                // This indicates whether the item is already visible or not
                var hide = false;
                var newFiltersFour = [];
                // If the filters contain the clicked shape hide it
                filterValuesFour.forEach(function (f) {
                  if (f === e.aggField.slice(-1)[0]) {
                    hide = true;
                  } else {
                    newFiltersFour.push(f);
                  }
                });
                // Hide the shape or show it
                if (hide) {
                  d3.select(this).style("opacity", 0.2);
                } else {
                  newFiltersFour.push(e.aggField.slice(-1)[0]);
                  d3.select(this).style("opacity", 0.9);
                }
                // Update the filters
                filterValuesFour = newFiltersFour;
                // Filter the data
                occChart.data = dimple.filterData(dataFour, "Occupation", filterValuesFour);

                occChart.draw(800);
              });
              svgFour.selectAll("notes_text")
                .data(["Data source: National Anti-Drug Agency"])
                .enter()
                .append("text")
                  .attr("x", 25)
                  .attr("y", function(d, i) { return 320 + i *15; } )
                  .style("font-family", "sans-serif")
                  .style("font-size", "10px")
                  .text(function (d) { return d; });
            });
        </script>
      </div>

      <div id="reasonsChart">
        <h4>Reasons for Taking Drugs: Most addicts were influenced by friends</h4>

        <p>Many people have never experienced addiction of any sort. For these people it can be very hard to understand and grasp the logic behind drug abuse. So, how does one get into it? When asked for the reason for taking drugs, most drug addicts answered that they were influenced by friends. This is followed by curiosity and for fun/recreational reasons. </p>
        <p>For those influenced by friends, they often rationalise it by thinking that their friend’s has been doing drugs for a couple years and they seem fine. For young adults, it’s very easy to think that drug use can be handled and controlled, especially if they see others they know doing the same thing. </p>
        <p>Individuals with a family history of drug abuse are also far more likely to develop an addiction than an individual with no family background of addiction. Other reasons can be explored in the chart below. </p>

        <script type="text/javascript">
        var svgFive = dimple.newSvg("#reasonsChart", 450, 230);
          d3.csv("datasets_csv/drug_addicts_reasons.csv", function (dataFive) {
            console.log(dataFive)

            svgFive.append("text")
              .attr("x", 180)
              .attr("y", 8)
              .attr("text-anchor", "middle")
              .style("font-size", "10px")
              .style("font-weight", "bold")
              .text("Drug Addicts Breakdown by Reasons");

            var rssChart = new dimple.chart(svgFive, dataFive);
            rssChart.setBounds(60, 20, 252, 152);

            var xFive = rssChart.addCategoryAxis("x", "Year");
            xFive.addOrderRule("Date");

            var yFive = rssChart.addMeasureAxis("y", "Total");
            yFive.tickFormat = 'f';

            var mySeriesFive = rssChart.addSeries("Reasons", dimple.plot.line);
              mySeriesFive.lineMarkers = true;
            var myLegendFive = rssChart.addLegend(425, 18, 5, 180, "right");

            rssChart.draw();

            rssChart.legends = [];

            svgFive.selectAll("title_text")
              .data(["Click legend to","show/hide reasons:"])
              .enter()
              .append("text")
                .attr("x", 316)
                .attr("y", function (d, i) { return 10 + i * 12; })
                .style("font-family", "sans-serif")
                .style("font-size", "10px")
                .style("color", "Black")
                .text(function (d) { return d; });

            var filterValuesFive = dimple.getUniqueValues(dataFive, "Reasons");

            myLegendFive.shapes.selectAll("rect")
              // Add a click event to each rectangle
              .on("click", function (e) {
                // This indicates whether the item is already visible or not
                var hide = false;
                var newFiltersFive = [];
                // If the filters contain the clicked shape hide it
                filterValuesFive.forEach(function (f) {
                  if (f === e.aggField.slice(-1)[0]) {
                    hide = true;
                  } else {
                    newFiltersFive.push(f);
                  }
                });
                // Hide the shape or show it
                if (hide) {
                  d3.select(this).style("opacity", 0.2);
                } else {
                  newFiltersFive.push(e.aggField.slice(-1)[0]);
                  d3.select(this).style("opacity", 0.9);
                }
                // Update the filters
                filterValuesFive = newFiltersFive;
                // Filter the data
                rssChart.data = dimple.filterData(dataFive, "Reasons", filterValuesFive);

                rssChart.draw(800);
              });
              svgFive.selectAll("notes_text")
                .data(["Data source: National Anti-Drug Agency"])
                .enter()
                .append("text")
                  .attr("x", 25)
                  .attr("y", function(d, i) { return 220 + i *15; } )
                  .style("font-family", "sans-serif")
                  .style("font-size", "10px")
                  .text(function (d) { return d; });
            });
        </script>
      </div>

      <div id="statesMap">
        <h4>Mapping Out the Drug Addicts: Most addicts are in urban developed cities and northern Malaysia</h4>

        <p>Finally, if we breakdown the number of drug addicts according to states, Pulau Pinang is often a hotspot. From 2010 to 2014, the state has consistently recorded the highest numbers. Interestingly also, the other two states that have recorded high numbers are Perak and Kedah. All three of these states are in the northern parts of Peninsular Malaysia. Central of Malaysia, Selangor is clearly a hotspot.</p>

        <iframe width="450" height="230" scrolling="no" frameborder="no" src="https://fusiontables.google.com/embedviz?q=select+col2%2C+col3%2C+col4+from+1VD8Daa8mZXGZw5fuOlqPIztlZN9nEG1Zu03iMX2h+limit+1000&amp;viz=HEATMAP&amp;h=true&amp;lat=3.7313156833561862&amp;lng=104.37088114624021&amp;t=1&amp;z=7&amp;l=col2&amp;y=2&amp;tmplt=2&amp;hmd=true&amp;hmg=%2366ff0000%2C%2393ff00ff%2C%23c1ff00ff%2C%23eeff00ff%2C%23f4e300ff%2C%23f4e300ff%2C%23f9c600ff%2C%23ffaa00ff%2C%23ff7100ff%2C%23ff3900ff%2C%23ff0000ff&amp;hmo=0.6&amp;hmr=50&amp;hmw=4&amp;hml=TWO_COL_LAT_LNG"></iframe>
      </div>

    </section>

  </div>
  <script src="javascripts/scale.fix.js"></script>
</html>
