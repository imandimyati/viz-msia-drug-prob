<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <title>Visualising Malaysia&#39;s Drug Abuse Issues</title>
  <link rel="stylesheet" href="stylesheets/styles.css">
  <link rel="stylesheet" href="stylesheets/github-light.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/dimple/2.2.0/dimple.latest.min.js"></script>
  <meta name="viewport" content="width=device-width">
  <!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>
<body>
  <div class="wrapper">
    <header>
      <h1>The Costs of Tackling Drug Abuse</h1>
      <p>Looking at the costs of tackling drug abuse in Malaysia</p>
      <p class="view"><a href="https://imandimyati.github.io/viz-msia-drug-prob/main.html">The Costs of Tackling Drug Abuse<small><br>Looking at the costs of tackling drug abuse in Malaysia</small></a></p>
      <p class="view"><a href="https://imandimyati.github.io/viz-msia-drug-prob/art2.html">An In-Depth Look into Malaysia's Drug Addicts<small><br>Exploring the demographic data of drug addicts in Malaysia</small></a></p>
      <p class="view"><a href="https://imandimyati.github.io/viz-msia-drug-prob/art3.html">Drug Crimes: Offenses and Punishments<small><br>A look into drug-related offenses and punishments in Malaysia</small></a></p>
      <p class="view"><a href="https://imandimyati.github.io/viz-msia-drug-prob/art4.html">'Drugging' Down the Nation<small><br>Making sense of the social impact in relations to drug abuse in Malaysia</small></a></p>
      <a href="https://imandimyati.github.io/viz-msia-drug-prob/"><button>Home</button></a>
    </header>

    <section>
      <div id="rehabChart">
        <h4>Cost of Compulsory Rehab: Barely any change, no decrease to number of residents</h4>

        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed placerat eget dui at finibus. Aenean magna sapien, pellentesque a diam ac, sagittis volutpat sem.
          Quisque suscipit lorem nec tristique fringilla. Nam ultrices metus nulla, sed pretium libero tristique quis. Integer imperdiet aliquet ligula id blandit.
          Cras porttitor condimentum elit. Integer id finibus tellus. Aenean nec dapibus lorem, sed vulputate dolor. In iaculis risus ac aliquam blandit. Aliquam erat volutpat.
          Vestibulum erat odio, fringilla eu rutrum ut, euismod eget ipsum. Nullam at faucibus nisl. Sed ornare elit odio, eu ullamcorper sem tincidunt ac.</p>

        <script type="text/javascript">
          var svgOne = dimple.newSvg("#rehabChart", 450, 215);
           d3.csv("datasets_csv/puspen_cost.csv", function (dataOne) {

             svgOne.append("text")
               .attr("x", 180)
               .attr("y", 8)
               .attr("text-anchor", "middle")
               .style("font-size", "10px")
               .style("font-weight", "bold")
               .text("Cost of Compulsory Rehab Treatment");

            var rehChart = new dimple.chart(svgOne, dataOne);
            rehChart.setBounds(60, 15, 252, 152)
            rehChart.addCategoryAxis("x", "Year");
            var yOne = rehChart.addMeasureAxis("y", "Cost Estimate (RM)");
              yOne.tickFormat = 'f';
            var zOne = rehChart.addMeasureAxis("z", "Number of Residents");
              zOne.tickFormat = 'f';
            rehChart.addSeries("Year", dimple.plot.bubble);
            rehChart.defaultColors = [new dimple.color("rgb(158,202,225)")];
            rehChart.draw();
          });
        </script>
      </div>

      <div id="aadksChart">
        <h4>Narcotic Agency Spending: Huge chunk goes to operation</h4>

        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed placerat eget dui at finibus. Aenean magna sapien, pellentesque a diam ac, sagittis volutpat sem.
          Quisque suscipit lorem nec tristique fringilla. Nam ultrices metus nulla, sed pretium libero tristique quis. Integer imperdiet aliquet ligula id blandit.
          Cras porttitor condimentum elit. Integer id finibus tellus. Aenean nec dapibus lorem, sed vulputate dolor. In iaculis risus ac aliquam blandit. Aliquam erat volutpat.
          Vestibulum erat odio, fringilla eu rutrum ut, euismod eget ipsum. Nullam at faucibus nisl. Sed ornare elit odio, eu ullamcorper sem tincidunt ac.</p>

        <script type="text/javascript">
          var svgTwo = dimple.newSvg("#aadksChart", 450, 215);
           d3.csv("datasets_csv/aadk_cost.csv", function (dataTwo) {
             console.log(dataTwo)

             svgTwo.append("text")
               .attr("x", 200)
               .attr("y", 8)
               .attr("text-anchor", "middle")
               .style("font-size", "10px")
               .style("font-weight", "bold")
               .text("Narcotic Agency Spending");

             var aadkChart = new dimple.chart(svgTwo, dataTwo);
             aadkChart.setBounds(75, 30, 250, 150);

             // Define all the axes
             var xAxis = aadkChart.addCategoryAxis("x", "Year");
             var yAxis = aadkChart.addMeasureAxis("y", "Total Cost (RM)");
             var segments = aadkChart.addMeasureAxis("p", "Cost (RM)");
             var size = aadkChart.addMeasureAxis("z", "Total Cost (RM)");
             var ring = aadkChart.addSeries("Purpose", dimple.plot.pie);
             var pie = aadkChart.addSeries("Year", dimple.plot.pie);
             var myLegendTwo = aadkChart.addLegend(425, 18, 5, 180, "right");

             myLegendTwo._getEntries = function () {
               var orderedValues = ["Development", "Operation", "2010", "2011", "2012", "2013", "2014"];
               var entries = [];
               orderedValues.forEach(function (v) {
                 entries.push(
                   {
                     key: v,
                     fill: aadkChart.getColor(v).fill,
                     stroke: aadkChart.getColor(v).stroke,
                     opacity: aadkChart.getColor(v).opacity,
                     aggField: [v]
                   }
                 );
               }, this);

               return entries;
             };

             // Set the maximum radius for the bubbles
             ring.radius = 15;
             pie.radius = 15;

             // Create fixed 10px ring with a 5px
             // margin (negative sizes are calculated inwards)
             ring.innerRadius = "-5px";
             pie.outerRadius = "-7px";

             aadkChart.draw();
         });
        </script>
      </div>

      <div id="seizeChart">
        <h4>Drug Seizure: Millions worth of drug confiscated, cocaine the highest</h4>

        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed placerat eget dui at finibus. Aenean magna sapien, pellentesque a diam ac, sagittis volutpat sem.
          Quisque suscipit lorem nec tristique fringilla. Nam ultrices metus nulla, sed pretium libero tristique quis. Integer imperdiet aliquet ligula id blandit.
          Cras porttitor condimentum elit. Integer id finibus tellus. Aenean nec dapibus lorem, sed vulputate dolor. In iaculis risus ac aliquam blandit. Aliquam erat volutpat.
          Vestibulum erat odio, fringilla eu rutrum ut, euismod eget ipsum. Nullam at faucibus nisl. Sed ornare elit odio, eu ullamcorper sem tincidunt ac.</p>

        <script type="text/javascript">
          var svgThree = dimple.newSvg("#seizeChart", 450, 215);
            d3.csv("datasets_csv/seizure_value.csv", function (dataThree) {

              svgThree.append("text")
                .attr("x", 200)
                .attr("y", 8)
                .attr("text-anchor", "middle")
                .style("font-size", "10px")
                .style("font-weight", "bold")
                .text("Estimated Value of Drug Seizure");

              var seiChart = new dimple.chart(svgThree, dataThree);
              seiChart.setBounds(60, 15, 252, 152)
              var xThree = seiChart.addCategoryAxis("x", ["Year", "Type of Drug"]);
              xThree.addOrderRule("Date");
              seiChart.addMeasureAxis("y", "Estimated Value (RM)");
              seiChart.addMeasureAxis("z", "Estimated Value (RM)");
              seiChart.addSeries("Type of Drug", dimple.plot.bubble);
              var myLegendThree = seiChart.addLegend(425, 18, 5, 180, "right");

              seiChart.draw();

              seiChart.legends = [];

              svgThree.selectAll("title_text")
                .data(["Click legend to","show/hide type of drug:"])
                .enter()
                .append("text")
                  .attr("x", 315)
                  .attr("y", function (d, i) { return 10 + i * 12; })
                  .style("font-family", "sans-serif")
                  .style("font-size", "10px")
                  .style("color", "Black")
                  .text(function (d) { return d; });

              var filterValues = dimple.getUniqueValues(dataThree, "Type of Drug");

              myLegendThree.shapes.selectAll("rect")
                // Add a click event to each rectangle
                .on("click", function (e) {
                  // This indicates whether the item is already visible or not
                  var hide = false;
                  var newFilters = [];
                  // If the filters contain the clicked shape hide it
                  filterValues.forEach(function (f) {
                    if (f === e.aggField.slice(-1)[0]) {
                      hide = true;
                    } else {
                      newFilters.push(f);
                    }
                  });
                  // Hide the shape or show it
                  if (hide) {
                    d3.select(this).style("opacity", 0.2);
                  } else {
                    newFilters.push(e.aggField.slice(-1)[0]);
                    d3.select(this).style("opacity", 0.9);
                  }
                  // Update the filters
                  filterValues = newFilters;
                  // Filter the data
                  seiChart.data = dimple.filterData(dataThree, "Type of Drug", filterValues);

                  seiChart.draw(800);
                });
              });
        </script>
      </div>

    </section>

  </div>
  <script src="javascripts/scale.fix.js"></script>
</html>
